{% extends "layout.html" %}

{% block content %}
<!-- Hero Section with 3D Background -->
<section class="relative min-h-screen flex items-center justify-center overflow-hidden">
    <!-- Animated Grid Background -->
    <div class="absolute inset-0 cyber-grid opacity-20"></div>
    
    <!-- Floating Elements -->
    <div class="absolute inset-0">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl animate-float"></div>
        <div class="absolute top-3/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-float" style="animation-delay: 2s;"></div>
        <div class="absolute bottom-1/4 left-1/2 w-48 h-48 bg-cyan-500/10 rounded-full blur-3xl animate-float" style="animation-delay: 4s;"></div>
    </div>
    
    <!-- Hero Content -->
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="space-y-8">
            <!-- Logo and Title -->
            <div class="space-y-4" x-data="{ loaded: false }" x-init="setTimeout(() => loaded = true, 100)">
                <div class="flex justify-center mb-8">
                    <div class="w-32 h-32 bg-gradient-to-br from-blue-500 via-purple-600 to-cyan-500 rounded-3xl flex items-center justify-center transform hover:scale-110 transition-all duration-500 shadow-2xl"
                         :class="loaded ? 'animate-slide-up' : 'opacity-0'">
                        <i class="fas fa-database text-white text-5xl animate-glow"></i>
                    </div>
                </div>
                
                <h1 class="text-6xl md:text-8xl font-black gradient-text animate-glow"
                    :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'">
                    WizData
                </h1>
                
                <h2 class="text-2xl md:text-4xl font-light text-gray-300"
                    :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'"
                    style="animation-delay: 0.2s;">
                    African Financial Intelligence Platform
                </h2>
                
                <p class="text-xl text-gray-400 max-w-3xl mx-auto leading-relaxed"
                   :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'"
                   style="animation-delay: 0.4s;">
                    Enterprise-grade data intelligence with advanced licensing, real-time analytics, 
                    and comprehensive African market coverage. Transform your business with our cutting-edge B2B platform.
                </p>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex flex-wrap justify-center gap-6 mt-12" x-data="{ loaded: false }" x-init="setTimeout(() => loaded = true, 600)">
                <a href="#platform-overview" class="gradient-button transform hover:scale-110 shadow-2xl"
                   :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'">
                    <i class="fas fa-rocket mr-2"></i>
                    Explore Platform
                </a>
                <a href="/api/datasets" class="glass-button transform hover:scale-110"
                   :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'"
                   style="animation-delay: 0.1s;">
                    <i class="fas fa-database mr-2"></i>
                    Browse Datasets
                </a>
                <a href="/api/docs" class="glass-button transform hover:scale-110"
                   :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'"
                   style="animation-delay: 0.2s;">
                    <i class="fas fa-book mr-2"></i>
                    API Documentation
                </a>
            </div>
            
            <!-- Live Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mt-16" x-data="{ loaded: false }" x-init="setTimeout(() => loaded = true, 800)">
                <div class="stat-card text-center"
                     :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'">
                    <div class="text-3xl font-bold text-blue-400" id="active-licenses-hero">12</div>
                    <div class="text-sm text-gray-400">Active Licenses</div>
                </div>
                <div class="stat-card text-center"
                     :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'"
                     style="animation-delay: 0.1s;">
                    <div class="text-3xl font-bold text-purple-400" id="total-datasets-hero">8</div>
                    <div class="text-sm text-gray-400">Datasets</div>
                </div>
                <div class="stat-card text-center"
                     :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'"
                     style="animation-delay: 0.2s;">
                    <div class="text-3xl font-bold text-green-400" id="api-calls-hero">2,847</div>
                    <div class="text-sm text-gray-400">API Calls Today</div>
                </div>
                <div class="stat-card text-center"
                     :class="loaded ? 'animate-slide-up' : 'opacity-0 translate-y-10'"
                     style="animation-delay: 0.3s;">
                    <div class="text-3xl font-bold text-yellow-400" id="uptime-hero">99.9%</div>
                    <div class="text-sm text-gray-400">Uptime</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
        <a href="#platform-overview" class="block">
            <i class="fas fa-chevron-down text-2xl text-gray-400 hover:text-white transition-colors"></i>
        </a>
    </div>
</section>

<!-- Platform Overview Section -->
<section id="platform-overview" class="py-20 bg-gradient-to-b from-gray-900 to-gray-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Section Header -->
        <div class="text-center mb-16" x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 1})">
            <h2 class="text-4xl font-bold gradient-text mb-6">Platform Overview</h2>
            <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                Comprehensive B2B data intelligence platform serving enterprise clients across African markets
            </p>
        </div>

        <!-- Key Metrics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
            <!-- Active Datasets Card -->
            <div class="glass-card rounded-2xl p-8 text-center hover-lift"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 0.8, delay: 0.1})">
                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-database text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2" id="active-datasets">24</h3>
                <p class="text-gray-400 text-sm mb-4">Active Datasets</p>
                <div class="flex items-center justify-center space-x-2">
                    <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                    <span class="text-green-400 text-xs">All Systems Online</span>
                </div>
            </div>

            <!-- API Requests Card -->
            <div class="glass-card rounded-2xl p-8 text-center hover-lift"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 0.8, delay: 0.2})">
                <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-chart-line text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2" id="api-requests-today">45,234</h3>
                <p class="text-gray-400 text-sm mb-4">API Requests Today</p>
                <div class="flex items-center justify-center space-x-2">
                    <span class="text-green-400 text-xs">+23% from yesterday</span>
                    <i class="fas fa-arrow-up text-green-400 text-xs"></i>
                </div>
            </div>

            <!-- Revenue Card -->
            <div class="glass-card rounded-2xl p-8 text-center hover-lift"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 0.8, delay: 0.3})">
                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-dollar-sign text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2" id="monthly-revenue">$127K</h3>
                <p class="text-gray-400 text-sm mb-4">Monthly Revenue</p>
                <div class="flex items-center justify-center space-x-2">
                    <span class="text-purple-400 text-xs">+15% this month</span>
                    <i class="fas fa-arrow-up text-purple-400 text-xs"></i>
                </div>
            </div>

            <!-- Client Satisfaction Card -->
            <div class="glass-card rounded-2xl p-8 text-center hover-lift"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 0.8, delay: 0.4})">
                <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-heart text-white text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold text-white mb-2" id="client-satisfaction">98.7%</h3>
                <p class="text-gray-400 text-sm mb-4">Client Satisfaction</p>
                <div class="flex items-center justify-center space-x-2">
                    <span class="text-orange-400 text-xs">Excellent rating</span>
                    <i class="fas fa-star text-orange-400 text-xs"></i>
                </div>
            </div>
        </div>

        <!-- Main Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Dataset Registry & Licensing (2/3 width) -->
            <div class="lg:col-span-2">
                <div class="glass-card rounded-2xl p-8 mb-8"
                     x-data="datasetRegistry()" x-init="gsap.fromTo($el, {opacity: 0, x: -50}, {opacity: 1, x: 0, duration: 0.8, delay: 0.2})">
                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <h3 class="text-2xl font-bold text-white mb-2">Dataset Registry</h3>
                            <p class="text-gray-400">Enterprise data catalog with subscription-based access control</p>
                        </div>
                        <button @click="refreshDatasets()" 
                                class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors">
                            <i class="fas fa-sync-alt mr-2"></i>
                            Refresh
                        </button>
                    </div>

                    <!-- Dataset Cards Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <template x-for="dataset in datasets" :key="dataset.id">
                            <div class="bg-gray-800/30 rounded-xl p-6 border border-gray-700 hover:border-blue-500/50 transition-all duration-300 hover:shadow-lg">
                                <div class="flex items-start justify-between mb-4">
                                    <div class="flex items-center space-x-3">
                                        <div :class="dataset.categoryColor" class="w-12 h-12 rounded-xl flex items-center justify-center">
                                            <i :class="dataset.icon" class="text-white text-xl"></i>
                                        </div>
                                        <div>
                                            <h4 class="text-lg font-bold text-white" x-text="dataset.name"></h4>
                                            <p class="text-gray-400 text-sm" x-text="dataset.description"></p>
                                        </div>
                                    </div>
                                    <span :class="dataset.status === 'Active' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'"
                                          class="px-3 py-1 rounded-full text-xs font-medium" x-text="dataset.status"></span>
                                </div>
                                
                                <div class="space-y-3 mb-4">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400 text-sm">Category:</span>
                                        <span :class="dataset.categoryColor.replace('bg-gradient-to-br', 'text')" 
                                              class="font-medium" x-text="dataset.category"></span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400 text-sm">Source:</span>
                                        <span class="text-white font-medium" x-text="dataset.source"></span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400 text-sm">Data Points:</span>
                                        <span class="text-cyan-400 font-mono" x-text="dataset.dataPoints"></span>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex space-x-2">
                                        <template x-for="tier in dataset.tiers" :key="tier">
                                            <span :class="tier === 'Basic' ? 'bg-blue-500/20 text-blue-400' :
                                                          tier === 'Professional' ? 'bg-purple-500/20 text-purple-400' :
                                                          'bg-orange-500/20 text-orange-400'"
                                                  class="px-2 py-1 rounded text-xs font-medium" x-text="tier"></span>
                                        </template>
                                    </div>
                                    <button class="px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg text-sm hover:from-blue-600 hover:to-purple-700 transition-all duration-300">
                                        Manage
                                    </button>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- API Endpoints Status -->
                <div class="glass-card rounded-2xl p-8"
                     x-data="apiEndpoints()" x-init="gsap.fromTo($el, {opacity: 0, x: -50}, {opacity: 1, x: 0, duration: 0.8, delay: 0.4})">
                    <div class="flex items-center justify-between mb-8">
                        <div>
                            <h3 class="text-2xl font-bold text-white mb-2">API Endpoints Status</h3>
                            <p class="text-gray-400">Real-time monitoring of API infrastructure</p>
                        </div>
                        <button @click="checkHealth()" 
                                class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors">
                            <i class="fas fa-heartbeat mr-2"></i>
                            Health Check
                        </button>
                    </div>

                    <div class="space-y-4">
                        <template x-for="endpoint in endpoints" :key="endpoint.path">
                            <div class="flex items-center justify-between p-4 bg-gray-800/30 rounded-xl border border-gray-700">
                                <div class="flex items-center space-x-4">
                                    <div :class="endpoint.status === 'Online' ? 'bg-green-500' : 
                                                 endpoint.status === 'Limited' ? 'bg-yellow-500' : 'bg-red-500'"
                                         class="w-3 h-3 rounded-full animate-pulse"></div>
                                    <div>
                                        <code class="text-cyan-400 font-mono" x-text="endpoint.path"></code>
                                        <p class="text-gray-400 text-sm" x-text="endpoint.description"></p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <span class="text-gray-400 text-sm" x-text="endpoint.responseTime + 'ms'"></span>
                                    <span :class="endpoint.status === 'Online' ? 'bg-green-500/20 text-green-400' : 
                                                  endpoint.status === 'Limited' ? 'bg-yellow-500/20 text-yellow-400' : 'bg-red-500/20 text-red-400'"
                                          class="px-3 py-1 rounded-full text-xs font-medium" x-text="endpoint.status"></span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <!-- Sidebar (1/3 width) -->
            <div class="space-y-8">
                <!-- License Management -->
                <div class="glass-card rounded-2xl p-8"
                     x-data="licenseManagement()" x-init="gsap.fromTo($el, {opacity: 0, x: 50}, {opacity: 1, x: 0, duration: 0.8, delay: 0.3})">
                    <h3 class="text-2xl font-bold text-white mb-6">License Management</h3>
                    
                    <!-- License Tiers -->
                    <div class="space-y-4 mb-6">
                        <template x-for="tier in licenseTiers" :key="tier.name">
                            <div class="bg-gray-800/30 rounded-xl p-4 border border-gray-700">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h4 class="text-lg font-bold text-white" x-text="tier.name"></h4>
                                        <p class="text-gray-400 text-sm" x-text="tier.limits"></p>
                                    </div>
                                    <span :class="tier.name === 'Basic' ? 'bg-blue-500' : 
                                                  tier.name === 'Professional' ? 'bg-purple-500' : 'bg-orange-500'"
                                          class="px-3 py-1 rounded-full text-white text-sm font-medium" x-text="tier.price"></span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-400 text-sm">Active Licenses:</span>
                                    <span class="text-white font-medium" x-text="tier.active + '/' + tier.total"></span>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-2 mt-2">
                                    <div :class="tier.name === 'Basic' ? 'bg-blue-500' : 
                                                 tier.name === 'Professional' ? 'bg-purple-500' : 'bg-orange-500'"
                                         class="h-2 rounded-full transition-all duration-300"
                                         :style="'width: ' + (tier.active / tier.total * 100) + '%'"></div>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <button class="w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300">
                        <i class="fas fa-plus mr-2"></i>
                        Create New License
                    </button>
                </div>

                <!-- Usage Analytics -->
                <div class="glass-card rounded-2xl p-8"
                     x-data="usageAnalytics()" x-init="gsap.fromTo($el, {opacity: 0, x: 50}, {opacity: 1, x: 0, duration: 0.8, delay: 0.5})">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-white">Usage Analytics</h3>
                        <select @change="updatePeriod($event.target.value)" 
                                class="bg-gray-800 border border-gray-600 text-white px-3 py-2 rounded-lg text-sm">
                            <option value="7">Last 7 days</option>
                            <option value="30" selected>Last 30 days</option>
                            <option value="90">Last 90 days</option>
                        </select>
                    </div>
                    
                    <!-- Chart Container -->
                    <div class="h-48 bg-gray-900/30 rounded-lg border border-gray-700 mb-6">
                        <canvas id="usageChart" class="w-full h-full"></canvas>
                    </div>
                    
                    <!-- Usage Stats -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-400" x-text="totalRequests.toLocaleString()"></div>
                            <div class="text-gray-400 text-sm">Total Requests</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-400" x-text="successRate + '%'"></div>
                            <div class="text-gray-400 text-sm">Success Rate</div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="glass-card rounded-2xl p-8"
                     x-data="recentActivity()" x-init="gsap.fromTo($el, {opacity: 0, x: 50}, {opacity: 1, x: 0, duration: 0.8, delay: 0.7})">
                    <h3 class="text-2xl font-bold text-white mb-6">Recent Activity</h3>
                    
                    <div class="space-y-4">
                        <template x-for="activity in activities" :key="activity.id">
                            <div class="flex items-start space-x-3 p-3 bg-gray-800/30 rounded-lg">
                                <div :class="activity.type === 'license' ? 'bg-blue-500' :
                                             activity.type === 'api' ? 'bg-green-500' :
                                             activity.type === 'dataset' ? 'bg-purple-500' : 'bg-orange-500'"
                                     class="w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0">
                                    <i :class="activity.icon" class="text-white text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-white text-sm font-medium" x-text="activity.message"></p>
                                    <p class="text-gray-400 text-xs" x-text="activity.time"></p>
                                </div>
                            </div>
                        </template>
                    </div>
                    
                    <button class="w-full mt-4 px-4 py-2 text-gray-400 hover:text-white border border-gray-600 hover:border-gray-500 rounded-lg transition-colors">
                        View All Activity
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

            <!-- Additional Services Section -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-16">
            <!-- Platform Services -->
            <div class="glass-card rounded-2xl p-8 hover-lift"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 0.8, delay: 0.6})">
                <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-shield-alt text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-white text-center mb-4">Security & Authentication</h3>
                <p class="text-gray-400 text-center mb-6">
                    JWT-based authentication, API key management, rate limiting, and license-based access control.
                </p>
                <div class="flex flex-wrap gap-2 justify-center mb-6">
                    <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm">JWT Auth</span>
                    <span class="px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm">API Keys</span>
                    <span class="px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm">Rate Limiting</span>
                </div>
                <button @click="testAuth()" 
                        class="w-full px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-medium hover:from-green-600 hover:to-emerald-700 transition-all duration-300">
                    <i class="fas fa-key mr-2"></i>
                    Test Authentication
                </button>
            </div>

            <!-- ETL & Processing -->
            <div class="glass-card rounded-2xl p-8 hover-lift"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 0.8, delay: 0.7})">
                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-sync-alt text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-white text-center mb-4">ETL & Data Processing</h3>
                <p class="text-gray-400 text-center mb-6">
                    Automated ETL jobs, data validation, cleaning, and real-time processing with job scheduling.
                </p>
                <div class="flex flex-wrap gap-2 justify-center mb-6">
                    <span class="px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm">ETL Jobs</span>
                    <span class="px-3 py-1 bg-gray-500/20 text-gray-400 rounded-full text-sm">Validation</span>
                    <span class="px-3 py-1 bg-purple-500/20 text-purple-400 rounded-full text-sm">Scheduler</span>
                </div>
                <button @click="checkJobs()" 
                        class="w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-cyan-700 transition-all duration-300">
                    <i class="fas fa-tasks mr-2"></i>
                    View ETL Status
                </button>
            </div>

            <!-- Analytics & Insights -->
            <div class="glass-card rounded-2xl p-8 hover-lift"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, y: 50}, {opacity: 1, y: 0, duration: 0.8, delay: 0.8})">
                <div class="w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-chart-line text-white text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-white text-center mb-4">Analytics & Insights</h3>
                <p class="text-gray-400 text-center mb-6">
                    Advanced analytics, usage tracking, performance monitoring, and business intelligence dashboards.
                </p>
                <div class="flex flex-wrap gap-2 justify-center mb-6">
                    <span class="px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm">Analytics</span>
                    <span class="px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm">Tracking</span>
                    <span class="px-3 py-1 bg-red-500/20 text-red-400 rounded-full text-sm">Alerts</span>
                </div>
                <button @click="loadAnalytics()" 
                        class="w-full px-4 py-3 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-xl font-medium hover:from-yellow-600 hover:to-orange-700 transition-all duration-300">
                    <i class="fas fa-chart-bar mr-2"></i>
                    View Analytics
                </button>
            </div>
        </div>

        <!-- Platform Development Roadmap -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-16">
            <!-- Completed Features -->
            <div class="glass-card rounded-2xl p-8 border border-green-500/30"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, x: -50}, {opacity: 1, x: 0, duration: 0.8, delay: 0.9})">
                <div class="flex items-center mb-6">
                    <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center mr-4">
                        <i class="fas fa-check-circle text-white text-xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-white">Completed Features</h3>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-check text-green-400"></i>
                        <span class="text-white font-medium">Dataset Registry & Licensing System</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-check text-green-400"></i>
                        <span class="text-white font-medium">Authentication & API Key Management</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-check text-green-400"></i>
                        <span class="text-white font-medium">ETL Jobs & Data Processing Pipeline</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-check text-green-400"></i>
                        <span class="text-white font-medium">Usage Tracking & Rate Limiting</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-check text-green-400"></i>
                        <span class="text-white font-medium">Multi-source Data Scrapers</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-check text-green-400"></i>
                        <span class="text-white font-medium">RESTful API Endpoints</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-check text-green-400"></i>
                        <span class="text-white font-medium">Docker Containerization</span>
                    </div>
                </div>
            </div>

            <!-- In Development -->
            <div class="glass-card rounded-2xl p-8 border border-yellow-500/30"
                 x-data x-init="gsap.fromTo($el, {opacity: 0, x: 50}, {opacity: 1, x: 0, duration: 0.8, delay: 1.0})">
                <div class="flex items-center mb-6">
                    <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl flex items-center justify-center mr-4">
                        <i class="fas fa-clock text-white text-xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-white">In Development</h3>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                        <span class="text-white font-medium">Real-time WebSocket Streaming</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                        <span class="text-white font-medium">VueOn Charting Integration</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                        <span class="text-white font-medium">Advanced Analytics Dashboard</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                        <span class="text-white font-medium">Client Onboarding System</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                        <span class="text-white font-medium">AI-Powered Data Insights</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                        <span class="text-white font-medium">White-label Solutions</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spinner fa-spin text-yellow-400"></i>
                        <span class="text-white font-medium">Mobile API SDK</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
// Alpine.js Data Components
document.addEventListener('alpine:init', () => {
    // Dataset Registry Component
    Alpine.data('datasetRegistry', () => ({
        datasets: [
            {
                id: 1,
                name: 'JSE Market Data',
                description: 'Real-time Johannesburg Stock Exchange data',
                category: 'Market Data',
                categoryColor: 'bg-gradient-to-br from-blue-500 to-cyan-500',
                source: 'JSE Direct Feed',
                status: 'Active',
                dataPoints: '2.4M',
                icon: 'fas fa-chart-line',
                tiers: ['Basic', 'Professional']
            },
            {
                id: 2,
                name: 'ESG Metrics',
                description: 'Environmental, Social & Governance data',
                category: 'ESG',
                categoryColor: 'bg-gradient-to-br from-green-500 to-emerald-500',
                source: 'Multiple Providers',
                status: 'Active',
                dataPoints: '856K',
                icon: 'fas fa-leaf',
                tiers: ['Professional', 'Enterprise']
            },
            {
                id: 3,
                name: 'News Analytics',
                description: 'Sentiment analysis and news data',
                category: 'News',
                categoryColor: 'bg-gradient-to-br from-purple-500 to-pink-500',
                source: 'GDELT Project',
                status: 'Active',
                dataPoints: '1.2M',
                icon: 'fas fa-newspaper',
                tiers: ['Basic', 'Professional', 'Enterprise']
            },
            {
                id: 4,
                name: 'Economic Indicators',
                description: 'Macroeconomic data and indicators',
                category: 'Economic',
                categoryColor: 'bg-gradient-to-br from-yellow-500 to-orange-500',
                source: 'World Bank, IMF',
                status: 'Active',
                dataPoints: '125K',
                icon: 'fas fa-chart-bar',
                tiers: ['Professional', 'Enterprise']
            }
        ],
        
        refreshDatasets() {
            // Simulate API call
            this.showToast('info', 'Refreshing datasets...');
            setTimeout(() => {
                this.showToast('success', 'Datasets refreshed successfully');
            }, 1500);
        },
        
        showToast(type, message) {
            showToast(type, message);
        }
    }));

    // API Endpoints Component  
    Alpine.data('apiEndpoints', () => ({
        endpoints: [
            {
                path: '/api/datasets',
                description: 'Dataset Registry API',
                status: 'Online',
                responseTime: 45
            },
            {
                path: '/api/licenses',
                description: 'License Management API',
                status: 'Online',
                responseTime: 32
            },
            {
                path: '/api/market-data',
                description: 'Market Data API',
                status: 'Online',
                responseTime: 28
            },
            {
                path: '/api/data-access',
                description: 'Data Access API',
                status: 'Limited',
                responseTime: 67
            },
            {
                path: '/health',
                description: 'System Health Check',
                status: 'Online',
                responseTime: 12
            }
        ],
        
        checkHealth() {
            this.showToast('info', 'Running health check...');
            // Simulate checking each endpoint
            this.endpoints.forEach((endpoint, index) => {
                setTimeout(() => {
                    endpoint.responseTime = Math.floor(Math.random() * 50) + 10;
                    endpoint.status = Math.random() > 0.1 ? 'Online' : 'Limited';
                }, index * 200);
            });
            
            setTimeout(() => {
                this.showToast('success', 'Health check completed');
            }, 1000);
        },
        
        showToast(type, message) {
            showToast(type, message);
        }
    }));

    // License Management Component
    Alpine.data('licenseManagement', () => ({
        licenseTiers: [
            {
                name: 'Basic',
                price: '$299/mo',
                limits: '10K API calls, 2 datasets',
                active: 8,
                total: 15
            },
            {
                name: 'Professional', 
                price: '$899/mo',
                limits: '100K API calls, 6 datasets',
                active: 12,
                total: 20
            },
            {
                name: 'Enterprise',
                price: '$2,999/mo',
                limits: 'Unlimited calls, all datasets',
                active: 3,
                total: 10
            }
        ]
    }));

    // Usage Analytics Component
    Alpine.data('usageAnalytics', () => ({
        totalRequests: 45234,
        successRate: 98.7,
        selectedPeriod: 30,
        
        updatePeriod(period) {
            this.selectedPeriod = period;
            this.loadUsageData(period);
        },
        
        loadUsageData(days) {
            // Generate realistic sample data
            this.totalRequests = Math.floor(Math.random() * 20000) + 30000;
            this.successRate = 95 + Math.random() * 4;
            
            // Update chart data
            updateUsageChart(days);
        }
    }));

    // Recent Activity Component
    Alpine.data('recentActivity', () => ({
        activities: [
            {
                id: 1,
                type: 'license',
                icon: 'fas fa-key',
                message: 'New Professional license activated',
                time: '2 minutes ago'
            },
            {
                id: 2,
                type: 'api',
                icon: 'fas fa-exchange-alt',
                message: 'High-frequency API usage detected',
                time: '5 minutes ago'
            },
            {
                id: 3,
                type: 'dataset',
                icon: 'fas fa-database',
                message: 'Market data ETL job completed',
                time: '8 minutes ago'
            },
            {
                id: 4,
                type: 'system',
                icon: 'fas fa-shield-alt',
                message: 'Security scan completed successfully',
                time: '12 minutes ago'
            },
            {
                id: 5,
                type: 'license',
                icon: 'fas fa-exclamation-triangle',
                message: 'Usage threshold warning for client XYZ',
                time: '15 minutes ago'
            }
        ]
    }));
});

// Utility Functions
function updateUsageChart(days) {
    // Generate sample data based on period
    const labels = [];
    const apiData = [];
    const licenseData = [];
    
    for (let i = days - 1; i >= 0; i--) {
        const date = new Date();
        date.setDate(date.getDate() - i);
        labels.push(date.toLocaleDateString());
        
        apiData.push(Math.floor(Math.random() * 2000) + 1000);
        licenseData.push(Math.floor(Math.random() * 500) + 100);
    }
    
    // Update chart if it exists
    const canvas = document.getElementById('usageChart');
    if (canvas) {
        const ctx = canvas.getContext('2d');
        
        // Destroy existing chart if any
        if (window.usageChartInstance) {
            window.usageChartInstance.destroy();
        }
        
        // Create new chart
        window.usageChartInstance = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'API Requests',
                    data: apiData,
                    fill: true,
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    tension: 0.4,
                    pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                    pointRadius: 3
                }, {
                    label: 'License Checks',
                    data: licenseData,
                    fill: true,
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    borderColor: 'rgba(16, 185, 129, 1)',
                    tension: 0.4,
                    pointBackgroundColor: 'rgba(16, 185, 129, 1)',
                    pointRadius: 3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            color: 'rgba(255, 255, 255, 0.8)',
                            usePointStyle: true,
                            padding: 20
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#fff',
                        bodyColor: '#fff',
                        borderColor: 'rgba(59, 130, 246, 0.5)',
                        borderWidth: 1
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.7)'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.7)'
                        }
                    }
                }
            }
        });
    }
}

// Platform Action Functions
function testAuth() {
    showToast('info', 'Testing authentication...');
    
    fetch('/api/auth/test', {
        method: 'GET',
        headers: {
            'Authorization': 'Bearer test-token'
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.authenticated) {
            showToast('success', 'Authentication test passed');
        } else {
            showToast('warning', 'Authentication test failed');
        }
    })
    .catch(error => {
        showToast('error', 'Authentication test error');
    });
}

function checkJobs() {
    showToast('info', 'Checking ETL job status...');
    
    fetch('/api/jobs/status')
        .then(response => response.json())
        .then(data => {
            showToast('success', `Found ${data.active_jobs || 3} active ETL jobs`);
        })
        .catch(error => {
            showToast('warning', 'ETL job status unavailable');
        });
}

function loadAnalytics() {
    showToast('info', 'Loading analytics dashboard...');
    
    setTimeout(() => {
        showToast('success', 'Analytics dashboard loaded');
    }, 1000);
}

// Enhanced toast notification system
function showToast(type, message) {
    const toastContainer = document.querySelector('.toast-container') || createToastContainer();
    
    const toast = document.createElement('div');
    toast.className = 'fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300';
    
    const colors = {
        success: 'bg-green-500',
        error: 'bg-red-500',
        warning: 'bg-yellow-500',
        info: 'bg-blue-500'
    };
    
    const icons = {
        success: 'fa-check-circle',
        error: 'fa-times-circle',
        warning: 'fa-exclamation-triangle',
        info: 'fa-info-circle'
    };
    
    toast.classList.add(colors[type]);
    toast.innerHTML = `
        <div class="flex items-center space-x-3 text-white">
            <i class="fas ${icons[type]}"></i>
            <span class="font-medium">${message}</span>
            <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white/80 hover:text-white">
                <i class="fas fa-times text-sm"></i>
            </button>
        </div>
    `;
    
    document.body.appendChild(toast);
    
    // Slide in
    setTimeout(() => {
        toast.classList.remove('translate-x-full');
    }, 100);
    
    // Auto remove
    setTimeout(() => {
        toast.classList.add('translate-x-full');
        setTimeout(() => {
            if (toast.parentElement) {
                toast.remove();
            }
        }, 300);
    }, 5000);
}

// Initialize chart on page load
document.addEventListener('DOMContentLoaded', function() {
    // Initialize usage chart with default 30 days
    setTimeout(() => {
        updateUsageChart(30);
    }, 1000);
    
    // Update live stats every 30 seconds
    setInterval(() => {
        // Update hero stats
        const stats = {
            activeLicenses: Math.floor(Math.random() * 5) + 10,
            totalDatasets: 8,
            apiCalls: Math.floor(Math.random() * 1000) + 2000,
            uptime: (99.5 + Math.random() * 0.4).toFixed(1)
        };
        
        // Update hero section stats
        const heroLicenses = document.getElementById('active-licenses-hero');
        const heroDatasets = document.getElementById('total-datasets-hero');
        const heroApiCalls = document.getElementById('api-calls-hero');
        const heroUptime = document.getElementById('uptime-hero');
        
        if (heroLicenses) heroLicenses.textContent = stats.activeLicenses;
        if (heroDatasets) heroDatasets.textContent = stats.totalDatasets;
        if (heroApiCalls) heroApiCalls.textContent = stats.apiCalls.toLocaleString();
        if (heroUptime) heroUptime.textContent = stats.uptime + '%';
        
        // Update platform overview stats
        const platformDatasets = document.getElementById('active-datasets');
        const platformRequests = document.getElementById('api-requests-today');
        const platformRevenue = document.getElementById('monthly-revenue');
        const platformSatisfaction = document.getElementById('client-satisfaction');
        
        if (platformDatasets) platformDatasets.textContent = stats.totalDatasets;
        if (platformRequests) platformRequests.textContent = (stats.apiCalls * 15).toLocaleString();
        if (platformRevenue) platformRevenue.textContent = '$' + Math.floor(Math.random() * 50 + 100) + 'K';
        if (platformSatisfaction) platformSatisfaction.textContent = (97 + Math.random() * 2).toFixed(1) + '%';
    }, 30000);
});
</script>
</script>
{% endblock %}